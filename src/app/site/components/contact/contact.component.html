<div class="container" *ngIf="checkAuth; else guestView">
  <div class="row">
    <div class="col-md-12 col-md-offset-3 shadow py-3">
      <nb-card accent="secondary">
        <nb-card-header>
          <h1> Add Review</h1>
        </nb-card-header>
        <nb-card-body>
          <h3>
            Please leave a comment below, and let me know what you think! about the concert.
          </h3>
        </nb-card-body>
      </nb-card>

      <div class="panel panel-info">
        <div class="panel-body">
          <form #commentForm="ngForm">
            <div class="form-group">
              <textarea [(ngModel)]="newComment" placeholder="Write your comment here!" class="pb-cmnt-textarea" ngModel
                name="comment" #comment="ngModel" maxlength="200" minlength="5"></textarea>
              <nb-alert status="disabled" accent="danger" class="text-danger" *ngIf="!comment.valid && comment.touched">
                <span *ngIf="comment.errors.minlength">Please enter at least 5 characters.</span>
                <span *ngIf="comment.errors.maxlength">Please enter no more than 200 characters.</span>
              </nb-alert>
            </div>

            <button class="btn btn-primary pull-right btn-block" type="button" (click)="onSubmit()"
              [disabled]="!commentForm.valid || newComment == ''">Share</button>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<ng-template #guestView>
  <div class="row">
    <div class="col-12">
      <nb-card accent="secondary">
        <nb-card-header>
          <h1> MPK Concert Reviews</h1>
        </nb-card-header>
      </nb-card>
    </div>
  </div>
</ng-template>

<div class="mt-3" *ngFor="let comment of comments; let idx = index">
  <div class="row">
    <div class="col-md-12">
      <div class="card d-flex flex-column flex-md-row">
        <div class="card-body">
          <h4>
            <img *ngIf="index%2 != 0" src="./../../../../assets/images/img_avatar.png" alt="Avatar" class="avatar mr-1">
            <img *ngIf="index%2 == 0" src="./../../../../assets/images/img_avatar2.png" alt="Avatar"
              class="avatar mr-1">
            {{comment.firstName | titlecase}}
          </h4>
          <h6>{{comment.comment}}</h6>
        </div>
      </div>
    </div>
  </div>
</div>